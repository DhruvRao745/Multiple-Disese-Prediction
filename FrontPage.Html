<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Multiple Disease Prediction - User Info</title>
  <link rel="stylesheet" href="frontpage.css">
</head>
<body>
  
  <div class="main-container">
    <h1>Disease Prediction - User Details</h1>
    <form id="diseaseForm" autocomplete="on" role="form" aria-labelledby="form-title">
      <fieldset class="card">
        <legend class="sr-only">User Information</legend>
        <!--Name input box-->
        <label class="field-label" for="name">Name</label>
        <input
          type="text"
          id="name"
          name="name"
          placeholder="Enter full name"
          required
          aria-describedby="name-help"
          aria-required="true"
        />
        <span id="name-help" class="sr-only">Enter your full name as it appears on official documents</span>
        <!--Age input box-->
        <label class="field-label" for="age">Age</label>
        <input
          type="number"
          id="age"
          name="age"
          min="1"
          max="120"
          placeholder="Enter age"
          required
          aria-describedby="age-help"
          aria-required="true"
        />
        <span id="age-help" class="sr-only">Enter your current age in years</span>
         <!--Gender  input box-->
        <label class="field-label" for="gender">Gender</label>
        <select id="gender" name="gender" required aria-describedby="gender-help" aria-required="true">
          <option value="">Select gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
        <span id="gender-help" class="sr-only">Select your gender from the available options</span>
         <!--Mobile No.  input box-->
        <label class="field-label" for="mobile">Mobile No.</label>
        <input
          type="tel"
          id="mobile"
          name="mobile"
          pattern="[6-9]\d{9}"
          maxlength="10"
          placeholder="Enter mobile number"
          required
          aria-describedby="mobile-help"
          aria-required="true"
        />
        <span id="mobile-help" class="sr-only">Enter a valid 10-digit mobile number starting with 6-9</span>
         <!--Address  input box-->
        <label class="field-label" for="address">Address</label>
        <textarea
          id="address"
          name="address"
          rows="2"
          placeholder="Enter address"
          required
          aria-describedby="address-help"
          aria-required="true"
        ></textarea>
        <span id="address-help" class="sr-only">Enter your complete residential address</span>
      </fieldset>
      <!--Disease selection Cards-->
      <div class="card disease-card">
        <span class="disease-label">Select Disease to Predict</span>
        <div class="disease-options">
          <button type="button" class="disease-option" data-disease="Diabetes">
            Diabetes
          </button>
          <button type="button" class="disease-option" data-disease="Heart">
            Heart Disease
          </button>
          <button type="button" class="disease-option" data-disease="Parkinsons">
            Parkinson's Disease
          </button>
        </div>
        <input type="hidden" id="disease" name="disease" required />
      </div>

      <button type="submit" class="submit-btn">Submit Details</button>
      <div class="msg" id="formMsg">Your information has been submitted!</div>
    </form>
  </div>

  <!-- JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('diseaseForm');
      const diseaseInput = document.getElementById('disease');
      const msg = document.getElementById('formMsg');
      const diseaseOptions = document.querySelectorAll('.disease-option');

      // Handle disease selection with error handling
      diseaseOptions.forEach(btn => {
        btn.addEventListener('click', function() {
          try {
            // Remove selected class from all buttons
            diseaseOptions.forEach(b => b.classList.remove('selected'));
            // Add selected class to clicked button
            this.classList.add('selected');
            // Set hidden input value
            diseaseInput.value = this.dataset.disease;
          } catch (error) {
            console.error('Error selecting disease:', error);
          }
        });
      });

      // Form submission handler
      form.addEventListener('submit', function(e) {
        e.preventDefault();

        try {
          // Validate required fields
          const requiredFields = form.querySelectorAll('[required]');
          let isValid = true;

          requiredFields.forEach(field => {
            if (!field.value.trim()) {
              isValid = false;
              field.focus();
              alert(`Please fill in the ${field.previousElementSibling.textContent} field.`);
              return false;
            }
          });

          if (!isValid) return;

          // Validate disease selection
          if (!diseaseInput.value) {
            alert('Please select a disease to predict.');
            return;
          }

          // Redirect to the selected disease page
          let targetPage = '';
          switch(diseaseInput.value) {
            case 'Diabetes':
              targetPage = '/diabetes';
              break;
            case 'Heart':
              targetPage = '/heart';
              break;
            case 'Parkinsons':
              targetPage = '/parkinsons';
              break;
            default:
              alert('Invalid disease selection.');
              return;
          }

          // Show success message briefly before redirecting
          msg.classList.add('show');
          setTimeout(() => {
            msg.classList.remove('show');
            window.location.href = targetPage;
          }, 1000);

        } catch (error) {
          console.error('Error submitting form:', error);
          alert('An error occurred. Please try again.');
        }
      });
    });
  </script>
</body>
</html>
